(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ebd82146"],{"19f2":function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"goods-detail-view"},[o("div",{staticClass:"goods-header"},[o("div",{staticClass:"goback-icon",on:{click:function(e){return t.$router.go(-1)}}},[o("i",{staticClass:"iconfont icon-fanhui"})]),o("div",{staticClass:"goods-img"},[o("img",{staticClass:"img-layout",attrs:{src:t.productDetail.large_img,alt:""}})]),o("div",{staticClass:"goods-title"},[t._v(" "+t._s(t.productDetail.name)+" ")])]),o("div",{staticClass:"goods-container"},[o("div",{staticClass:"goods-detail"},[o("div",{staticClass:"goods-desc"},[t._l(t.descList,(function(e,i){return o("div",{key:i,staticClass:"selection"},[o("h3",{staticClass:"desc"},[t._v(t._s(e.key))]),o("ul",{staticClass:"list"},t._l(e.value,(function(a,s){return o("li",{key:s,staticClass:"item",class:{active:e.currentIndex===s},on:{click:function(e){return t.selectItem(a,i,s)}}},[t._v(t._s(a))])})),0)])})),o("div",{staticClass:"desc-container"},[o("h3",{staticClass:"c-name"},[t._v("商品描述")]),t._l(t.goodsDesc,(function(e,i){return o("p",{key:i,staticClass:"c-desc"},[t._v(" "+t._s(e)+" ")])}))],2)],2),o("div",{staticClass:"goods-footer"},[o("div",{staticClass:"foods-info"},[o("div",{staticClass:"info"},[o("p",{staticClass:"price",style:{marginBottom:t.selectArr.length>0?"9px":"0px"}},[t._v("￥"+t._s(t.productDetail.price))]),o("p",{staticClass:"sel"},t._l(t.selectArr,(function(e,i){return o("span",{key:i},[t._v(t._s(e)+" ")])})),0)]),o("van-stepper",{attrs:{theme:"round","button-size":"18",min:"1",max:"99","disable-input":""},model:{value:t.count,callback:function(e){t.count=e},expression:"count"}})],1),o("div",{staticClass:"footer-btn"},[o("div",{staticClass:"collection",on:{click:t.collectionGoods}},[o("i",{directives:[{name:"show",rawName:"v-show",value:!t.bool,expression:"!bool"}],staticClass:"iconfont icon-xin1 rate"}),o("i",{directives:[{name:"show",rawName:"v-show",value:t.bool,expression:"bool"}],staticClass:"iconfont icon-xin rate"}),o("span",{staticClass:"content"},[t._v("收藏")])]),o("button",{staticClass:"btn shopcart",on:{click:t.addShopcart}},[t._v(" 加入购物车 ")]),o("button",{staticClass:"btn buy",on:{click:t.buy}},[t._v(" 立即购买 ")])])])])])])},a=[],s=(o("4160"),o("a15b"),o("ac1f"),o("1276"),o("5530"));function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,i=new Array(e);o<e;o++)i[o]=t[o];return i}function r(t){if(Array.isArray(t))return n(t)}o("a4d3"),o("e01a"),o("d28b"),o("a630"),o("d3b7"),o("3ca3"),o("ddb0");function c(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}o("fb6a"),o("b0c0"),o("25f0");function l(t,e){if(t){if("string"===typeof t)return n(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(t,e):void 0}}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t){return r(t)||c(t)||l(t)||d()}o("a2fc");var f=o("2f14"),h=o("2f62"),p={data:function(){return{id:"",count:0,productDetail:{},descList:[],goodsDesc:[],selectArr:[],bool:!1,sid:""}},created:function(){this.getGoodsDetailData(),this.queryCollectionGoods()},activated:function(){this.getGoodsDetailData()},methods:{buy:function(){var t=this;this.getToken?this.addShopcartByServe().then((function(e){t.$toast.clear(),console.log(e),3e3===e.data.code?(t.sid=e.data.sid,t.$toast(e.data.msg),setTimeout((function(){t.$router.push({name:"Pay",query:{sids:[t.sid]}})}),300)):t.$toast(e.data.msg)})).catch((function(e){t.$toast.clear(),console.log(e)})):this.$router.push({name:"Login"})},addShopcart:function(){var t=this;if(this.getToken){var e={appkey:this.appkey,tokenString:this.getToken};this.addShopcartByServe().then((function(o){t.$toast.clear(),console.log(o),3e3===o.data.code&&(t.$toast(o.data.msg),t.$router.push({name:"Menu"}),t.$store.dispatch("getShopcartCount",e))})).catch((function(e){t.$toast.clear(),console.log(e)}))}else this.$router.push({name:"Login"})},addShopcartByServe:function(){if(this.getToken){var t=u(this.selectArr),e=t.join("/");console.log(e);var o=f["a"].queryString({appkey:this.appkey,pid:this.$route.params.id,tokenString:this.getToken,count:this.count,rule:e});return this.$toast({type:"loading",message:"加载中",forbidClick:!0,loadingType:"spinner",duration:0}),this.axios({method:"POST",url:"/addShopcart",data:o})}this.$router.push({name:"Login"})},queryCollectionGoods:function(){var t=this;if(this.getToken){var e={appkey:this.appkey,pid:this.$route.params.id,tokenString:this.getToken};this.axios({method:"GET",url:"/findlike",params:e}).then((function(e){console.log(e),1e3===e.data.code&&e.data.result.length>0&&(t.bool=!0)})).catch((function(t){console.log(t)}))}},collectionGoods:function(){var t=this;if(this.getToken){var e=f["a"].queryString({appkey:this.appkey,pid:this.$route.params.id,tokenString:this.getToken}),o=this.bool?"/notlike":"/like";this.$toast({type:"loading",message:"加载中",forbidClick:!0,loadingType:"spinner",duration:0}),this.axios({method:"POST",url:o,data:e}).then((function(e){console.log(e),t.$toast().clear(),800===e.data.code?(t.$toast(e.data.msg),t.bool=!0):700===e.data.code?t.$router.push({name:"Login"}):900===e.data.code&&(t.$toast(e.data.msg),t.bool=!1)})).catch((function(e){t.$toast().clear(),console.log(e)}))}else this.$router.push({name:"Login"})},selectItem:function(t,e,o){this.$set(this.selectArr,e,t),this.$set(this.descList[e],"currentIndex",o)},getGoodsDesc:function(){this.goodsDesc=u(this.productDetail["desc"].split(/\n/))},getDescList:function(){var t=this,e=["cream","milk","sugar","tem"];e.forEach((function(e){if(t.productDetail[e]){var o={key:t.productDetail["".concat(e,"_desc")],value:t.productDetail[e].split("/"),currentIndex:0};t.selectArr.push(t.productDetail[e].split("/")[0]),t.descList.push(o)}}))},getGoodsDetailData:function(){var t=this;this.id=this.$route.params.id,this.$toast({type:"loading",message:"加载中",forbidClick:!0,loadingType:"spinner",duration:0}),this.axios({method:"GET",url:"/productDetail",params:{appkey:this.appkey,pid:this.id}}).then((function(e){t.$toast.clear(),console.log(e),600===e.data.code?(t.productDetail=e.data.result[0],t.getDescList(),t.getGoodsDesc()):t.$toast(e.data.msg)}))}},computed:Object(s["a"])({},Object(h["b"])(["getToken"]))},g=p,v=o("2877"),m=Object(v["a"])(g,i,a,!1,null,null,null);e["default"]=m.exports},"3ca3":function(t,e,o){"use strict";var i=o("6547").charAt,a=o("69f3"),s=o("7dd0"),n="String Iterator",r=a.set,c=a.getterFor(n);s(String,"String",(function(t){r(this,{type:n,string:String(t),index:0})}),(function(){var t,e=c(this),o=e.string,a=e.index;return a>=o.length?{value:void 0,done:!0}:(t=i(o,a),e.index+=t.length,{value:t,done:!1})}))},"4df4":function(t,e,o){"use strict";var i=o("0366"),a=o("7b0b"),s=o("9bdd"),n=o("e95a"),r=o("50c4"),c=o("8418"),l=o("35a1");t.exports=function(t){var e,o,d,u,f,h,p=a(t),g="function"==typeof this?this:Array,v=arguments.length,m=v>1?arguments[1]:void 0,y=void 0!==m,b=l(p),k=0;if(y&&(m=i(m,v>2?arguments[2]:void 0,2)),void 0==b||g==Array&&n(b))for(e=r(p.length),o=new g(e);e>k;k++)h=y?m(p[k],k):p[k],c(o,k,h);else for(u=b.call(p),f=u.next,o=new g;!(d=f.call(u)).done;k++)h=y?s(u,m,[d.value,k],!0):d.value,c(o,k,h);return o.length=k,o}},a15b:function(t,e,o){"use strict";var i=o("23e7"),a=o("44ad"),s=o("fc6a"),n=o("a640"),r=[].join,c=a!=Object,l=n("join",",");i({target:"Array",proto:!0,forced:c||!l},{join:function(t){return r.call(s(this),void 0===t?",":t)}})},a2fc:function(t,e,o){},a630:function(t,e,o){var i=o("23e7"),a=o("4df4"),s=o("1c7e"),n=!s((function(t){Array.from(t)}));i({target:"Array",stat:!0,forced:n},{from:a})},b0c0:function(t,e,o){var i=o("83ab"),a=o("9bf2").f,s=Function.prototype,n=s.toString,r=/^\s*function ([^ (]*)/,c="name";i&&!(c in s)&&a(s,c,{configurable:!0,get:function(){try{return n.call(this).match(r)[1]}catch(t){return""}}})},d28b:function(t,e,o){var i=o("746f");i("iterator")},ddb0:function(t,e,o){var i=o("da84"),a=o("fdbc"),s=o("e260"),n=o("9112"),r=o("b622"),c=r("iterator"),l=r("toStringTag"),d=s.values;for(var u in a){var f=i[u],h=f&&f.prototype;if(h){if(h[c]!==d)try{n(h,c,d)}catch(g){h[c]=d}if(h[l]||n(h,l,u),a[u])for(var p in s)if(h[p]!==s[p])try{n(h,p,s[p])}catch(g){h[p]=s[p]}}}},e01a:function(t,e,o){"use strict";var i=o("23e7"),a=o("83ab"),s=o("da84"),n=o("5135"),r=o("861d"),c=o("9bf2").f,l=o("e893"),d=s.Symbol;if(a&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new d(t):void 0===t?d():d(t);return""===t&&(u[e]=!0),e};l(f,d);var h=f.prototype=d.prototype;h.constructor=f;var p=h.toString,g="Symbol(test)"==String(d("test")),v=/^Symbol\((.*)\)[^)]+$/;c(h,"description",{configurable:!0,get:function(){var t=r(this)?this.valueOf():this,e=p.call(t);if(n(u,t))return"";var o=g?e.slice(7,-1):e.replace(v,"$1");return""===o?void 0:o}}),i({global:!0,forced:!0},{Symbol:f})}}}]);
//# sourceMappingURL=chunk-ebd82146.264f60e6.js.map