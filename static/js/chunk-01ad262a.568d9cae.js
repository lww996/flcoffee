(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01ad262a"],{"0f38":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"menu",style:{paddingTop:t.loading?"20px":"0px"}},[s("van-skeleton",{attrs:{row:1,"row-width":"50%",loading:t.loading}}),s("van-skeleton",{attrs:{row:1,"row-width":"70%",loading:t.loading}}),s("van-skeleton",{attrs:{title:"","title-width":"100%",loading:t.loading}}),s("van-skeleton",{attrs:{avatar:"","avatar-shape":"square","avatar-size":"72",row:3,loading:t.loading}},[s("div",{staticClass:"store-info"},[s("div",{staticClass:"map-icon"}),s("div",[s("h3",{staticClass:"store-title"},[t._v("蚨来咖啡上海总店")]),s("p",{staticClass:"store-content"},[t._v("上海市-静安区-万荣路-大宁中心广场B6")])])]),s("div",{staticClass:"menu-banner"},[s("img",{staticClass:"menu-img",attrs:{src:e("0177"),alt:"菜单广告图"}})]),s("GoodList",{attrs:{typeList:t.typeList,menuList:t.menuList},on:{"query-menu":t.getMenuDataByType}})],1),s("van-skeleton",{attrs:{avatar:"","avatar-shape":"square","avatar-size":"72",row:3,loading:t.loading}}),s("van-skeleton",{attrs:{avatar:"","avatar-shape":"square","avatar-size":"72",row:3,loading:t.loading}}),s("van-skeleton",{attrs:{avatar:"","avatar-shape":"square","avatar-size":"72",row:3,loading:t.loading}}),s("van-skeleton",{attrs:{avatar:"","avatar-shape":"square","avatar-size":"72",row:3,loading:t.loading}})],1)},i=[],n=(e("72aa"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"good-list"},[e("div",{staticClass:"list"},[e("div",{ref:"menuList",staticClass:"menu-list"},[e("ul",t._l(t.typeList,(function(a,s){return e("li",{key:a.id,staticClass:"menu-item",class:t.currentIndex===s?"active":"",on:{click:function(e){return t.queryMenu(a,s)}}},[t._v(" "+t._s(a.typeDesc)+" ")])})),0)]),e("div",{ref:"detailList",staticClass:"detail-list"},[e("ul",t._l(t.menuList,(function(a){return e("li",{key:a.pid,staticClass:"detail-item",on:{click:function(e){return t.showDetailHandle(a.pid)}}},[e("div",{staticClass:"detsil-img"},[e("img",{attrs:{src:a.smallImg}})]),e("div",{staticClass:"detail-info"},[e("h4",{staticClass:"name"},[t._v(t._s(a.name))]),e("p",{staticClass:"desc"},[t._v(t._s(a.desc))]),e("div",{staticClass:"price"},[e("span",[t._v("￥"+t._s(a.price))]),e("span",{staticClass:"increase"},[t._v("+")])])])])})),0)])])])}),l=[],r=(e("3bb5"),e("a964")),o={props:{typeList:{type:Array},menuList:{type:Array}},data:function(){return{currentIndex:0}},mounted:function(){var t=this;this.$nextTick((function(){t.initalBScroller()}))},beforeDestroy:function(){this.menuScroll&&this.menuScroll.destroy(),this.detailScroll&&this.detailScroll.destroy()},methods:{showDetailHandle:function(t){this.$router.push({name:"Detail",params:{id:t}})},queryMenu:function(t,a){this.currentIndex=a,this.$emit("query-menu",t)},initalBScroller:function(){var t=this;this.$nextTick((function(){t.menuScroll?t.menuScroll.refresh():t.menuScroll=new r["a"](t.$refs.menuList,{click:!0}),t.detailScroll?t.detailScroll.refresh():t.detailScroll=new r["a"](t.$refs.detailList,{click:!0})}))}},watch:{menuList:function(){console.log("刷新了"),this.initalBScroller()}}},c=o,u=e("2877"),d=Object(u["a"])(c,n,l,!1,null,null,null),p=d.exports,v={components:{GoodList:p},data:function(){return{typeList:[],menuList:[],loading:!0}},created:function(){this.getTypeData()},methods:{getMenuDataByType:function(t){var a=this;if(this.menuList=[],sessionStorage.getItem(t.type)){var e=JSON.parse(sessionStorage.getItem(t.type));return this.menuList=e,void(this.loading=!1)}var s={appkey:this.appkey,key:"type",value:t.type};"isHot"===t.type&&(s.key="isHot",s.value=1),"isHot"!==t.type&&this.$toast({type:"loading",message:"加载中",forbidClick:!0,loadingType:"spinner",duration:0}),this.axios({method:"GET",url:"/typeProducts",params:s}).then((function(e){"isHot"!==t.type&&a.$toast.clear(),console.log(e),500===e.data.code&&(a.loading=!1,a.menuList=e.data.result,sessionStorage.setItem(t.type,JSON.stringify(a.menuList)))}))},getTypeData:function(){var t=this;this.axios({method:"GET",url:"/type",params:{appkey:this.appkey}}).then((function(a){console.log(a),400===a.data.code&&(a.data.result.unshift({id:(new Date).getTime(),type:"isHot",typeDesc:"最新推荐"}),t.getMenuDataByType(a.data.result[0]),t.typeList=a.data.result)}))}}},m=v,h=Object(u["a"])(m,s,i,!1,null,null,null);a["default"]=h.exports},"3bb5":function(t,a,e){},"72aa":function(t,a,e){}}]);
//# sourceMappingURL=chunk-01ad262a.568d9cae.js.map