{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.join.js","webpack:///./node_modules/core-js/modules/es.array.index-of.js","webpack:///./src/views/UserInfo.vue?fe44","webpack:///src/views/UserInfo.vue","webpack:///./src/views/UserInfo.vue?cbb4","webpack:///./src/views/UserInfo.vue"],"names":["$","IndexedObject","toIndexedObject","arrayMethodIsStrict","nativeJoin","join","ES3_STRINGS","Object","STRICT_METHOD","target","proto","forced","separator","call","this","undefined","$indexOf","indexOf","arrayMethodUsesToLength","nativeIndexOf","NEGATIVE_ZERO","USES_TO_LENGTH","ACCESSORS","1","searchElement","apply","arguments","length","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","onClickLeft","userInfo","userImg","afterRead","userId","phone","directives","name","rawName","value","expression","domProps","$event","modifyInfo","composing","$set","_v","staticRenderFns","component"],"mappings":"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","file":"static/js/chunk-12500265.6c2d1b6a.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $indexOf = require('../internals/array-includes').indexOf;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar nativeIndexOf = [].indexOf;\n\nvar NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('indexOf');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.indexOf` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n$({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || !STRICT_METHOD || !USES_TO_LENGTH }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? nativeIndexOf.apply(this, arguments) || 0\n      : $indexOf(this, searchElement, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user-info\"},[_c('van-nav-bar',{attrs:{\"title\":\"个人资料\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeft}}),_c('div',{staticClass:\"user-form\"},[_c('van-cell',{attrs:{\"title\":\"头像\"}},[_c('div',{staticClass:\"user-img\"},[_c('img',{staticClass:\"img-layout\",attrs:{\"src\":_vm.userInfo.userImg,\"alt\":\"\"}}),_c('van-uploader',{staticClass:\"uploader\",attrs:{\"after-read\":_vm.afterRead}})],1)]),_c('van-cell',{attrs:{\"title\":\"用户id\",\"value\":_vm.userInfo.userId}}),_c('van-cell',{attrs:{\"title\":\"手机号\",\"value\":_vm.userInfo.phone}}),_c('van-cell',{attrs:{\"title\":\"昵称\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.userInfo.nickName),expression:\"userInfo.nickName\"}],staticClass:\"form-inp\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.userInfo.nickName)},on:{\"change\":function($event){return _vm.modifyInfo('nickName','/updateNickName')},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.userInfo, \"nickName\", $event.target.value)}}})]),_c('div',{staticClass:\"area-box\"},[_c('h3',{staticClass:\"area-title\"},[_vm._v(\"简介\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.userInfo.desc),expression:\"userInfo.desc\"}],staticClass:\"text-area\",attrs:{\"placeholder\":\"主人很懒，啥也没留下~\"},domProps:{\"value\":(_vm.userInfo.desc)},on:{\"change\":function($event){return _vm.modifyInfo('desc','/updateDesc')},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.userInfo, \"desc\", $event.target.value)}}})])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n<div class=\"user-info\">\r\n    <van-nav-bar title=\"个人资料\" left-text=\"返回\" left-arrow @click-left=\"onClickLeft\" />\r\n\r\n    <div class=\"user-form\">\r\n        <van-cell title=\"头像\">\r\n            <div class=\"user-img\">\r\n                <img class=\"img-layout\" :src=\"userInfo.userImg\" alt=\"\">\r\n                <van-uploader class=\"uploader\" :after-read=\"afterRead\" />\r\n            </div>\r\n        </van-cell>\r\n        <van-cell title=\"用户id\" :value=\"userInfo.userId\" />\r\n        <van-cell title=\"手机号\" :value=\"userInfo.phone\" />\r\n        <van-cell title=\"昵称\">\r\n\t\t\t<input class=\"form-inp\" type=\"text\" v-model=\"userInfo.nickName\" @change=\"modifyInfo('nickName','/updateNickName')\">\r\n\t\t</van-cell>\r\n        <div class=\"area-box\">\r\n            <h3 class=\"area-title\">简介</h3>\r\n            <textarea class=\"text-area\" v-model=\"userInfo.desc\" @change=\"modifyInfo('desc','/updateDesc')\" placeholder=\"主人很懒，啥也没留下~\" />\r\n            </div>\r\n\r\n</div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport '../assets/scss/userinfo.scss'\r\nimport {\r\n    mapGetters\r\n} from 'vuex'\r\nimport { utils } from '../assets/js/utils'\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n\t\t\tuserInfo: {},\r\n\t\t\tmaxSize: 800  // 最大支持800Kb图片\r\n        }\r\n    },\r\n    created() {\r\n        this.getAccountInfo();\r\n    },\r\n    methods: {\r\n\t\t// 修改信息\r\n\t\tmodifyInfo(key,url) {\r\n\t\t\tif(!this.getToken) {\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tname: 'Login'\r\n\t\t\t\t})\r\n\t\t\t\treturn ;\r\n\t\t\t}\r\n\r\n\t\t\tlet data = utils.queryString({\r\n\t\t\t\tappkey: this.appkey,\r\n\t\t\t\ttokenString: this.getToken,\r\n\t\t\t\t[key]: this.userInfo[key]\r\n\t\t\t})\r\n\r\n\t\t\tthis.$toast({\r\n\t\t\t\ttype: 'loading',\r\n\t\t\t\tmessage: '加载中',\r\n\t\t\t\tforbidClick: true,\r\n\t\t\t\tloadingType: 'spinner',\r\n\t\t\t\tduration: 0\r\n\t\t\t});\r\n\r\n\t\t\tthis.axios({\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\turl,\r\n\t\t\t\tdata\r\n\t\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tthis.$toast.clear();\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t\tthis.$toast(res.data.msg);\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tthis.$toast.clear();\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t},\r\n        // 上次图片之后的回调\r\n        afterRead(file) {\r\n\t\t\tif(!this.getToken) {\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tname: 'Login'\r\n\t\t\t\t})\r\n\t\t\t\treturn ;\r\n\t\t\t}\r\n\r\n            let type = file.file.type.split('/')[1];\r\n            console.log(file);\r\n\r\n            let accept = ['png', 'jpg', 'jpeg', 'gif'];\r\n            if (accept.indexOf(type) === -1) {\r\n                this.$notify({\r\n                    message: '上传失败，仅支持' + accept.join('，') + '格式',\r\n                    color: '#fff',\r\n                    background: '#2b4868',\r\n                });\r\n\r\n                return;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tlet size = file.file.size / 1024;\r\n\t\t\tconsole.log(size);\r\n\t\t\tif(size > this.maxSize) {\r\n\t\t\t\tthis.$notify({\r\n                    message: '上传失败，图片过大，仅支持800kb以下',\r\n                    color: '#fff',\r\n                    background: '#2b4868',\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\treturn ;\r\n\t\t\t}\r\n\r\n\t\t\tlet base64 = file.content.replace(/data:image\\/[A-Za-z]+;base64,/, '');\r\n\t\t\t\r\n\t\t\tlet data = utils.queryString({\r\n\t\t\t\tappkey: this.appkey,\r\n\t\t\t\ttokenString: this.getToken,\r\n\t\t\t\timgType: type,\r\n\t\t\t\tserverBase64Img: base64\r\n\t\t\t})\r\n\r\n\t\t\tthis.$toast({\r\n\t\t\t\ttype: 'loading',\r\n\t\t\t\tmessage: '加载中',\r\n\t\t\t\tforbidClick: true,\r\n\t\t\t\tloadingType: 'spinner',\r\n\t\t\t\tduration: 0\r\n\t\t\t});\r\n\r\n\t\t\tthis.axios({\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\turl: '/updateAvatar',\r\n\t\t\t\tdata\r\n\t\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tthis.$toast.clear();\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t\tthis.$toast(res.data.msg);\r\n\t\t\t\tif(res.data.code === 'H001') {\r\n\t\t\t\t\tthis.userInfo.userImg = res.data.userImg;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tthis.$toast.clear();\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t\t\r\n\t\t\t})\r\n\r\n        },\r\n        getAccountInfo() {\r\n            if (!this.getToken) {\r\n                return;\r\n            }\r\n\r\n            let params = {\r\n                appkey: this.appkey,\r\n                tokenString: this.getToken\r\n            }\r\n\r\n            this.$toast({\r\n                type: 'loading',\r\n                message: '加载中',\r\n                forbidClick: true,\r\n                loadingType: 'spinner',\r\n                duration: 0\r\n            });\r\n\r\n            this.axios({\r\n                    method: 'GET',\r\n                    url: '/findAccountInfo',\r\n                    params\r\n                })\r\n                .then(res => {\r\n                    this.$toast.clear();\r\n                    console.log(res);\r\n                    if (res.data.code === 'B001') {\r\n                        this.userInfo = res.data.result[0];\r\n                    }\r\n\r\n                })\r\n                .catch(err => {\r\n                    this.$toast.clear();\r\n                    console.log(err);\r\n\r\n                })\r\n        },\r\n        onClickLeft() {\r\n            this.$router.go(-1);\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapGetters(['getToken'])\r\n    }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserInfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserInfo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserInfo.vue?vue&type=template&id=57cbe4f0&\"\nimport script from \"./UserInfo.vue?vue&type=script&lang=js&\"\nexport * from \"./UserInfo.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}